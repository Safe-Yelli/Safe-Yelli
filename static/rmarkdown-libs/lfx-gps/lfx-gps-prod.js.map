{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"L\"","webpack:///./node_modules/leaflet-gps/src/leaflet-gps.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","L","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","Control","Gps","extend","includes","version","Evented","Mixin","Events","options","autoActive","autoCenter","maxZoom","textErr","callErr","title","marker","style","radius","weight","color","opacity","fillColor","fillOpacity","position","transform","latlng","initialize","Util","this","setOptions","_errorFunc","showAlert","_isActive","_isLoading","_currentLocation","onAdd","map","_map","container","DomUtil","create","_button","href","DomEvent","on","stop","_switchGps","_alert","display","_gpsMarker","CircleMarker","_drawGps","_errorGps","activate","onRemove","deactivate","off","getLocation","addLayer","addClass","once","e","removeClass","setView","getZoom","locate","enableHighAccuracy","watch","stopLocate","removeLayer","fire","setLatLng","panTo","message","text","innerHTML","that","clearTimeout","timerAlert","setTimeout","Map","addInitHook","gpsControl","control","gps","addControl","apply"],"mappings":"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","file":"lfx-gps-prod.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = L;","(function (factory) {\n    if(typeof define === 'function' && define.amd) {\n    //AMD\n        define(['leaflet'], factory);\n    } else if(typeof module !== 'undefined') {\n    // Node/CommonJS\n        module.exports = factory(require('leaflet'));\n    } else {\n    // Browser globals\n        if(typeof window.L === 'undefined')\n            throw 'Leaflet must be loaded first';\n        factory(window.L);\n    }\n})(function (L) {\n\nL.Control.Gps = L.Control.extend({\n\n\tincludes: L.version[0] =='1' ? L.Evented.prototype : L.Mixin.Events,\n\t//\n\t//Managed Events:\n\t//\tEvent\t\t\tData passed\t\t\tDescription\n\t//\n\t//\tgps:located\t\t{marker,latlng}\t \tfired after gps marker is located\n\t//\tgps:disabled\t{marker}\t\t\tfired after gps is disabled\n\t//\tgps:error\t    {message}\t\t\tfired after gps error\n\t//\n\t//Methods exposed:\n\t//\tMethod \t\t\tDescription\n\t//\n\t//  getLocation\t\treturn Latlng and marker of current position\n\t//  activate\t\tactive tracking on runtime\n\t//  deactivate\t\tdeactive tracking on runtime\n\t//\n\toptions: {\n\t\tautoActive: false,\t\t//activate control at startup\n\t\tautoCenter: false,\t\t//move map when gps location change\n\t\tmaxZoom: null,\t\t\t//max zoom for autoCenter\n\t\ttextErr: '',\t\t\t//error message on alert notification\n\t\tcallErr: null,\t\t\t//function that run on gps error activating\n\t\ttitle: 'Center map on your location',\n\t\tmarker: null,\t\t\t//L.Marker used for location, default use a L.CircleMarker\n\t\tstyle: {\t\t\t\t//default L.CircleMarker styles\n\t\t\tradius: 5,\n\t\t\tweight: 2,\n\t\t\tcolor: '#c20',\n\t\t\topacity: 1,\n\t\t\tfillColor: '#f23',\n\t\t\tfillOpacity: 1\n\t\t},\n\t\t//accuracy: true,\t\t//show accuracy Circle\n\t\tposition: 'topleft',\n\t\ttransform: function(latlng) { return latlng },\n\t\t//TODO add gpsLayer\n\t\t//TODO timeout autoCenter\n\t},\n\n\tinitialize: function(options) {\n\t\tif(options && options.style)\n\t\t\toptions.style = L.Util.extend({}, this.options.style, options.style);\n\t\tL.Util.setOptions(this, options);\n\t\tthis._errorFunc = this.options.callErr || this.showAlert;\n\t\tthis._isActive = false;\n\t\tthis._isLoading = false;\n\t\tthis._currentLocation = null;\t//store last location\n\t},\n\n\tonAdd: function (map) {\n\n\t\tthis._map = map;\n\n\t\tvar container = L.DomUtil.create('div', 'leaflet-control-gps');\n\n\t\tthis._button = L.DomUtil.create('a', 'gps-button', container);\n\t\tthis._button.href = '#';\n\t\tthis._button.title = this.options.title;\n\n\t\tL.DomEvent\n\t\t\t.on(this._button, 'dblclick', L.DomEvent.stop, this)\n\t\t\t.on(this._button, 'click', L.DomEvent.stop, this)\n\t\t\t.on(this._button, 'click', this._switchGps, this);\n\n\t\tthis._alert = L.DomUtil.create('div', 'gps-alert', container);\n\t\tthis._alert.style.display = 'none';\n\n\t\tthis._gpsMarker = this.options.marker ? this.options.marker : new L.CircleMarker([0,0], this.options.style);\n\t\t//if(this.options.accuracy)\n\t\t//\tthis._accuracyCircle = new L.Circle([0,0], this.options.style);\n\n\t\tthis._map\n\t\t\t.on('locationfound', this._drawGps, this)\n\t\t\t.on('locationerror', this._errorGps, this);\n\n\t\tif(this.options.autoActive)\n\t\t\tthis.activate();\n\n\t\treturn container;\n\t},\n\n\tonRemove: function(map) {\n\t\tthis.deactivate();\n\n\t\tmap.off('locationfound', this._drawGps, this)\n\t\t   .off('locationerror', this._errorGps, this);\n\t},\n\n\t_switchGps: function() {\n\t\tif(this._isActive || this._isLoading)\n\t\t\tthis.deactivate();\n\t\telse\n\t\t\tthis.activate();\n\t},\n\n\tgetLocation: function() {\t//get last location\n\t\treturn this._currentLocation;\n\t},\n\n\tactivate: function() {\n\n\t\tthis._isActive = true;\n\t\tthis._isLoading = true;\n\t\tthis._map.addLayer( this._gpsMarker );\n\n\t\tL.DomUtil.addClass(this._button, 'loading');\n\t\t\n\t\tthis._map.once('locationfound', function(e) {\n\t\t\t\n\t\t\tL.DomUtil.removeClass(this._button, 'loading');\n\t\t\tL.DomUtil.removeClass(this._button, 'disabled');\n\t\t\tL.DomUtil.addClass(this._button, 'active');\n\n\t\t\tthis._isLoading = false;\n\t\t\t\n\t\t\tif(this.options.autoCenter)\n\t\t\t\tthis._map.setView(e.latlng, this.options.maxZoom || this._map.getZoom());\n\n\t\t}, this);\n\n\t\tthis._map.locate({\n\t\t\tenableHighAccuracy: false,\n\t\t\twatch: true,\n\t\t\tsetView: false,//this.options.autoCenter,\n\t\t\t//maxZoom: this.options.maxZoom || this._map.getZoom()\n\t\t});\n\t},\n\n\tdeactivate: function() {\n\t\t\n\t\tthis._isActive = false;\n\t\tthis._isLoading = false;\n\t\t\n\t\tL.DomUtil.removeClass(this._button, 'active');\n\t\tL.DomUtil.removeClass(this._button, 'loading');\n\n\t\tif(this._map) {\n\t\t\tthis._map.stopLocate();\n\t\t\tthis._map.removeLayer( this._gpsMarker );\n\t\t}\t\t\n\t\t\n\t\t//this._gpsMarker.setLatLng([-90,0]);  //move to antarctica!\n\t\t//TODO make method .hide() using _icon.style.display = 'none'\n\t\tthis.fire('gps:disabled', {marker: this._gpsMarker});\n\t},\n\n\t_drawGps: function(e) {\n\t\t//TODO use e.accuracy for gps circle radius/color\n\t\tthis._currentLocation = this.options.transform(e.latlng);\n\t\t\n\t\tthis._gpsMarker.setLatLng(this._currentLocation);\n\n\t\tif(this.options.autoCenter)\n\t\t\tthis._map.panTo(e.latlng);\n\n\t//    \tif(this._gpsMarker.accuracyCircle)\n\t//    \t\tthis._gpsMarker.accuracyCircle.setRadius((e.accuracy / 2).toFixed(0));\n\t\t\t\n\t\tthis.fire('gps:located', {\n\t\t\tlatlng: this._currentLocation,\n\t\t\tmarker: this._gpsMarker\n\t\t});\n\t},\n\n\t_errorGps: function(e) {\n\t\tthis.fire('gps:error', e);\n\n\t\tthis.deactivate();\n\t\t\n\t\tL.DomUtil.addClass(this._button, 'disabled');\n\n\t\tthis._errorFunc.call(this, this.options.textErr || e.message);\n\t},\n\n\t/*\t_updateAccuracy: function (event) {\n\t\t\tvar newZoom = this._map.getZoom(),\n\t\t\t\tscale = this._map.options.crs.scale(newZoom);\n\t\t\tthis._gpsMarker.setRadius(this.options.style.radius * scale);\n\t\t\tthis._gpsMarker.redraw();\n\t\t},\n\t*/\n\tshowAlert: function(text) {\n\t\tthis._alert.style.display = 'block';\n\t\tthis._alert.innerHTML = text;\n\t\tvar that = this;\n\t\tclearTimeout(this.timerAlert);\n\t\tthis.timerAlert = setTimeout(function() {\n\t\t\tthat._alert.style.display = 'none';\n\t\t}, 5000);\n\t}\n});\n\nL.Map.addInitHook(function () {\n\tif (this.options.gpsControl) {\n\t\tthis.gpsControl = L.control.gps(this.options.gpsControl);\n\t\tthis.addControl(this.gpsControl);\n\t}\n});\n\nL.control.gps = function (options) {\n\treturn new L.Control.Gps(options);\n};\n\nreturn L.Control.Gps;\n\n});\n\n"],"sourceRoot":""}